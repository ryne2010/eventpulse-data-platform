# EventPulse local development (.env) â€” hybrid host-run
#
# This env file is for the "Hybrid" workflow:
# - Postgres + Redis in Docker
# - API + worker running on your host machine (uv)
#
# For the recommended all-in-Docker workflow, use:
#   cp .env.example .env

# -----------------
# Core
# -----------------
DATABASE_URL=postgresql://postgres:eventpulse@localhost:5432/eventpulse
REDIS_URL=redis://localhost:6379/0

# -----------------
# Storage (local-first)
# -----------------
STORAGE_BACKEND=local          # local|gcs
RAW_DATA_DIR=./data/raw
CONTRACTS_DIR=./data/contracts
INCOMING_DIR=./data/incoming
ARCHIVE_DIR=./data/archive

# -----------------
# Async queue
# -----------------
QUEUE_BACKEND=redis            # redis|inline|cloud_tasks

# -----------------
# Processing hardening
# -----------------
PROCESSING_TTL_SECONDS=900
RECLAIM_MAX_PER_RUN=50
MAX_PROCESSING_ATTEMPTS=5

# Internal auth for Cloud Tasks + other privileged endpoints
TASK_AUTH_MODE=token           # token|iam

# Local-only default token so internal endpoints work out-of-the-box.
TASK_TOKEN=devtoken

# Public ingest auth (/api/ingest/upload)
INGEST_AUTH_MODE=none          # none|token
INGEST_TOKEN=

# Edge device auth (/api/edge/*)
EDGE_AUTH_MODE=none            # none|token
EDGE_ALLOWED_DATASETS=edge_telemetry

# Field ops tuning (seconds)
EDGE_OFFLINE_THRESHOLD_SECONDS=600

EDGE_ENROLL_TOKEN=
ENABLE_EDGE_SIGNED_URLS=false

# Upload controls
MAX_FILE_MB=50
ALLOWED_FILE_EXTS=.csv,.xlsx,.xls

# Demo endpoints
ENABLE_DEMO_ENDPOINTS=true

# Logging
LOG_LEVEL=INFO
LOG_FORMAT=console              # console|json
